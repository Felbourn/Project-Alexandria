PART
{
	name = His_FASAApollo_LES
	module = Part
	author = DennyTX/FASA

	MODEL
	{
		model = FASA/Apollo/ApolloCSM/Apollo_LES
	}
	scale = 1
	rescaleFactor = 1.0

	node_stack_bottom = 0.0, -0.2, 0.0,      0.0, -1.0, 0.0,    3

	TechRequired = specializedControl
	entryCost = 11000
	cost = 2650

	category = Utility
	subcategory = 0
	
	title = Apollo Launch Escape System
	manufacturer = FASA
	description = The launch escape subsystem will take the command module containing the astronauts away from the launch vehicle in case of an emergency on the pad or shortly after launch. The subsystem carries the CM to a sufficent height and to the side, away from the launch vehicle, so that the earth landing subsystem can operate. The subsystem looks like a large rocket connected to the command module by a lattice-work tower.

	// 33 ft long, 10 m
	// 4 ft dia, 1.22 m
	// 8000 lb, 3629 kg
	// jettison at 90 km, 20 seconds after stage 2 ignition
	// after abort, at 7 km
	// SL T 653.9 kN abort motor, 2132 kg (248 isp?) 3.2 seconds
	// pitch motor 10.7 kN, 23 kg (0.5 sec)
	// jettison motor 140.1 kN, 1 second

	attachRules = 1,0,1,1,1

	mass = 2.66

	dragModelType = default
	maximum_drag = 0.08
	minimum_drag = 0.05
	angularDrag = 2

	crashTolerance = 12

	maxTemp = 1600

	stagingIcon = SOLID_BOOSTER
	ActivatesEvenIfDisconnected = true

	CoMOffset = 0, 5, 0

//	bodyLiftMultiplier = 0

	stageOffset = -1
	childStageOffset = 1

	RESOURCE
	{
		name = HTPB
		amount = 802.81
		maxAmount = 802.81
	}

	MODULE
	{
	    name = ModuleDecouple
	    ejectionForce = 100
		explosiveNodeID = bottom
	}
    fx_gasBurst_white = 0.0, 0, 0.0,   0.0, 1.0, 0.0, decouple
    sound_vent_large = decouple
	
	MODULE
	{
		name = ModuleCargoBay
		DeployModuleIndex = 0
		closedPosition = 0
		lookupRadius = 2
	}

	MODULE
	{
		name = ModuleEnginesFX
		thrustVectorTransformName = thrustTransform
		throttleLocked = True
		exhaustDamage = False
		ignitionThreshold = 0.1
		minThrust = 664.6
		maxThrust = 664.6
		heatProduction = 150
		useEngineResponseTime = True
		engineAccelerationSpeed = 10.0
		allowShutdown = False
		PROPELLANT
		{
			name = HTPB
	        ratio = 1
			DrawGauge = False
		}
		atmosphereCurve
	 	{
	   	 	key = 0 180
	  	 	key = 1 153
	 	}
        powerEffectName = Solid-Lower
	}

	MODULE
	{
		name = ModuleSeeThroughObject
		transformName = model
	}

//    PLUME
//    {
//        name = Solid-Lower
//        transformName = thrustTransform
//        flarePosition = 0, 0, 0.002
//        flareScale = 0.4
//        plumePosition = 0, 0, 0.004
//        plumeScale = 0.2
//        energy = 1
//        speed = 1
//    }

	EFFECTS
	{
		Solid-Lower
		{
			MODEL_MULTI_PARTICLE_PERSIST
			{
				transformName = thrustTransform
				localRotation = 0,0,0
				localPosition = 0, 0, 0.002
				fixedScale = 0.4
				name = flare
				modelName = RealPlume/MP_Nazari_FX/KWbooster
				emission = 0.0 0
				emission = 0.01 0.2
				emission = 1.0 2
				speed = 0.0 1
				speed = 1.0 1
				offset = 0
				energy = 0.0 0.1
				energy = 1.0 0.1
				size = 0.0 0.6
				size = 1.0 0.6
				fixedEmissions = false
				randomInitalVelocityOffsetMaxRadius = 0.2
			}
			MODEL_MULTI_PARTICLE_PERSIST
			{
				transformName = thrustTransform
				localRotation = 0,0,0
				localPosition = 0, 0, 0.004
				fixedScale = 0.2
				energy = 1
				speed = 1
				name = plume
				modelName = RealPlume/MP_Nazari_FX/KWbooster
				fixedEmissions = false
				sizeClamp = 50
				randomInitalVelocityOffsetMaxRadius = 0.2
				randConeEmit
				{
					density = 1 0.4
					density = 0 1
				}
				logGrow
				{
					density = 1.0 2
					density = 0.1 3
					density = 0.0 2
				}
				logGrowScale
				{
					density = 1.0 0.0
					density = 0.8 1.5
					density = 0.46 2
					density = 0.2 2
					density = 0.1 2
					density = 0.0 5
				}
				linGrow
				{
					density = 1.0 1
					density = 0.46 1
					density = 0.2 3
					density = 0.05 7
					density = 0.0 7
				}
				speed
				{
					density = 1.0 2
					density = 0.46 2.5
					density = 0.2 2.5
					density = 0.05 3
					density = 0.0 3
				}
				xyForce
				{
					density = 1 0.95
					density = 0.24 0.9
					density = 0.0 1
				}
				emission
				{
					density = 1.0 4.0
					density = 0.8 3.5
					density = 0.2 3.5
					density = 0.1 2.9
					density = 0.05 2.3
					density = 0.0 2.25
					power = 1 1
					power = 0.01 0.2
					power = 0 0
				}
				energy
				{
					density = 1.0 2
					density = 0.3 2
					density = 0.05 0.5
					density = 0.0 0.5
				}
				size
				{
					density = 1.0 0.8
					density = 0.8 0.65
					density = 0.2 0.55
				}
			}
			MODEL_MULTI_PARTICLE_PERSIST
			{
				transformName = thrustTransform
				localRotation = 0,0,0
				localPosition = 0, 0, 0.004
				fixedScale = 0.2
				name = smoke
				modelName = RealPlume/MP_Nazari_FX/smokelaunch
				speed = 0.0 1.65
				speed = 1.0 1.65
				grow = 0.0 0.34
				grow = 1.0 0.34
				renderMode = "Billboard"
				collide = false
				collideRatio = 0
				sizeClamp = 250
				angle = 0.0 1.0
				angle = 45.0 1.0
				angle = 50.0 1.0
				distance = 0.0 1.0
				distance = 100.0 1.0
				distance = 110.0 1.0
				logGrow
				{
					density = 1.0 15
					density = 0.1 20
					density = 0.0 2
				}
				logGrowScale
				{
					density = 1.0 1
					density = 0.8 1.5
					density = 0.46 2
					density = 0.2 2
					density = 0.1 2
					density = 0.0 5
				}
				linGrow
				{
					density = 1.0 0
					density = 0.46 0
					density = 0.2 0
					density = 0.05 5
					density = 0.0 10
				}
				emission
				{
					density = 1.0 5.0
					density = 0.05 4
					density = 0.0 0
					power = 1 1
					power = 0.01 0.2
					power = 0 0
				}
				energy
				{
					density = 1.0 5
					density = 0.3 5
					density = 0.05 0.1
					density = 0.0 0.0
				}
				size
				{
					density = 1.0 1
					density = 0.8 1.2
					density = 0.6 2
					density = 0.2 3
					density = 0.0 7
				}
			}
			MODEL_MULTI_PARTICLE_PERSIST
			{
				transformName = thrustTransform
				localRotation = 0,0,0
				localPosition = 0, 0, 0.004
				fixedScale = 0.2
				name = slag
				modelName = Squad/FX/SRB_Large
				emission = 0.0 0
				emission = 0.01 0.05
				emission = 1.0 0.2
				speed = 0.0 1
				speed = 1.0 1
				offset = 0.02
				size = 0.0 0.2
				size = 1.0 0.2
				fixedEmissions = false
				randomInitalVelocityOffsetMaxRadius = 0.2
				randConeEmit
				{
					density = 1 0.4
					density = 0.5 0.8
					density = 0.1 1
					density = 0 1
				}
				xyForce
				{
					density = 1 0.9
					density = 0.35 0.93
					density = 0.0 1
				}
				energy
				{
					density = 1.0 6
					density = 0.3 5
					density = 0.05 2
					density = 0.0 1.5
				}
			}
			AUDIO
			{
				channel = Ship
				clip = RealPlume/KW_Sounds/sound_srbloop
				volume = 0.0 0.0
				volume = 1.0 2.5
				pitch = 0.0 1.0
				pitch = 1.0 1.0
				loop = true
			}
		}
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = RealPlume/KW_Sounds/sound_srb2
				volume = 2.5
				pitch = 1.0
				loop = false
			}
		}
		disengage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_soft
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
		flameout
		{
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
	}

	MODULE
	{
		name = TweakScale
		type = free
	}
}
